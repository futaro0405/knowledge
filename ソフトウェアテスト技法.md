## ソフトウェアテスト技法とは
なるべく少ないテストケースでなるべく多くのバグを発見するための技術
### 同値クラステストと境界値テスト
#### 同値クラステスト
同値クラスとは、__同じ動作をする条件の集まり__ として定義される。
各同値クラスから最低限1つの代表値を用いてテストを行う技法を __同値クラステスト__ と呼ぶ。

#### 境界値テスト
境界値テストは、__仕様条件の境界の値とその隣の値に対してテストを行う技法__ 。
境界付近にバグが潜んでいる可能性は高いため重要なテスト。
テストする値のパターンは以下3パターン
- 境界値
- 境界値の1つ上
- 境界値の1つ下

### ドメイン分析テストとデシジョンテーブル
#### ドメイン分析テスト
条件同士が相互作用を持つような場合
言い換えるなら、複雑な条件が数式で結ばれている場合に有効

offポイントはonポイントがドメイン内ならドメイン外の隣接する値、
onポイントがドメイン外ならドメイン内の隣接する値にする

| ポイント名 | 概要                           | x >= 10 の場合 | x > 10 の場合 |
| ---------- | ------------------------------ | -------------- | ------------- |
| on         | 境界上の値                     | 10             | 10            |
| off        | 境界上にはない境界に隣接する値 | 9              | 11            |
| in         | on/off以外のドメイン内側の値   | 15など         | 15など        |
| out        | on/off以外のドメイン外側の値   | 5など          | 5など         |
 
#### デシジョンテーブル
条件同士は独立していて、込み入った論理関係を整理する場合
言い換えるなら、複数の条件が論理式で結ばれている場合に有効

「書籍を購入している AND 4000円以上購入している AND 離島に住んでいない」
このケースをデシジョンテーブルで表現すると以下のようになる

表：デシジョンテーブル

|                        | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   |
| ---------------------- | --- | --- | --- | --- | --- | --- | --- | --- |
| 条件                   |     |     |     |     |     |     |     |     |
| 書籍を購入している     | Yes | Yes | Yes | No  | Yes | No  | No  | No  |
| 4000円以上購入している | Yes | Yes | No  | Yes | No  | Yes | No  | No  |
| 離島に住んでいない     | Yes | No  | Yes | Yes | No  | No  | Yes | No  |
| アクション             |     |     |     |     |     |     |     |     |
| 送料無料               | Yes | No  | No  | No  | No  | No  | No  | No  |

条件とその時の結果をそれぞれ埋めていくことで書くことができる
場合によって網羅性を維持しつつ、デシジョンテーブルを圧縮することができる
条件分岐の順番が判明している、かつ順番が一定なら圧縮可能

|                        | 1   | 2   | 3   | 4   |
| ---------------------- | --- | --- | --- | --- |
| 条件                   |     |     |     |     |
| 書籍を購入している     | Yes | Yes | Yes | No  |
| 4000円以上購入している | Yes | Yes | No  | -   |
| 離島に住んでいない     | Yes | No  | -   | -   |
| アクション             |     |     |     |     |
| 送料無料               | Yes | No  | No  | No  |

さらに条件が増えた場合、テストケースが膨大になる
全てを網羅することは諦め、少ないテストケースである程度の網羅性を確保するための技法がペア構成テスト

### ペア構成テスト（直公表）
#### ペア構成テスト
すべての条件のすべての組み合わせをテストするのではなく、条件のすべてのペアをテストする技法

すべてのペアとは？
例：2値条件（0/1）が3つ（条件A, B, C）ある場合
すべての組み合わせ → 8通りだが
すべてのペア →「AとB」「AとC」「BとC」という3通りの条件の組み合わせそれぞれに、「0, 0」「0, 1」「1, 0」「1, 1」の4通りの値

すべてのペアをテストすることである程度の網羅性が確保できる理由は？
ほとんどの欠陥はシングルモード欠陥とダブルモード欠陥のどちらか
シングルモード欠陥 → モジュールが正しく動かない欠陥
ダブルモード欠陥 → 2つのモジュールが組み合わさったときに生じる欠陥

すべてのペアを調べれば、シングルモード欠陥とダブルモード欠陥については網羅できることになるので、ある程度の網羅性を確保できる
ペア構成テストによって70~85%程度のバグを発見することが期待できる
これを見ただけだとすべてのペアを調べるほうが大変そうに思えるが、すべてのペアを調べるとテストケースが大幅に減ることを __直交表__ で確認しよう

#### 直交表
すべてのペアを抜けもれなく網羅する方法のひとつ
「2値条件（0/1）が3つ（条件A, B, C）ある場合」を直交表で書くと以下

表：直交表（2値条件が3つ） 

|     | A   | B   | C   |
| --- | --- | --- | --- |
| 1   | 0   | 0   | 0   |
| 2   | 0   | 1   | 1   |
| 3   | 1   | 0   | 1   |
| 4   | 1   | 1   | 0   |

直交表を使うと行がテストケースになり、直交表で作られたテストケースを使えばすべてのペアを網羅することができる
直交表の中にはすべての条件のペアにおいて「0, 0」「0, 1」「1, 0」「1, 1」が現れていることと、テストケースが4つまで減っていることに注目

「3値条件が4つある場合」は以下のような直交表になる
表：直交表（3値条件が4つ） 

|     | A   | B   | C   | D   |
| --- | --- | --- | --- | --- |
| 1   | 0   | 0   | 0   | 0   |
| 2   | 0   | 1   | 1   | 1   |
| 3   | 0   | 2   | 2   | 2   |
| 4   | 1   | 0   | 1   | 2   |
| 5   | 1   | 1   | 2   | 0   |
| 6   | 1   | 2   | 0   | 1   |
| 7   | 2   | 0   | 2   | 1   |
| 8   | 2   | 1   | 0   | 2   |
| 9   | 2   | 2   | 1   | 0   |

すべての組み合わせは3の4乗で81通りあるのに対して、すべてのペアは直交表を使えば9通りのテストケースでテストできる

この場合でも「0,0」「0,1」「0,2」「1,0」「1,1」「1,2」「2,0」「2,1」「2,2」が すべてのペアにおいて現れていることに注目
このように直交表を使えばすべてのペアを少ないテストケースで網羅できる
⇒直交表を使えるようになろう！

直交表は自分でつくるものではない
すでにあるものの中から目的に応じて適切な直交表を選ぶのがテスト実行者の仕事
適切な直交表を選ぶためには、直交表の表記法を知る必要がある

表：L4(2^3)直交表（2値条件が3つ）

|     | A   | B   | C   |
| --- | --- | --- | --- |
| 1   | 0   | 0   | 0   |
| 2   | 0   | 1   | 1   |
| 3   | 1   | 0   | 1   |
| 4   | 1   | 1   | 0    |


上の直交表は4行で2値条件が3つなので「L4(2^3)」と表現する

### 状態遷移テスト
現在の状態とその遷移によって振る舞いが変わるようなソフトウェアをテストするための技法
状態遷移テストは目的に応じて2種類ある
簡単に全体を確認する __状態遷移図__
深く詳細を確認する __状態遷移表__

#### 状態遷移図

