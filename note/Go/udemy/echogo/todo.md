# overview
## overview
### 学習内容
- クリーンアーキテクチャの理解と実装
- Echoフレームワークと「gorm」を用いたREST APIの実装
- タスク管理（CRUD操作）とJWTを用いた認証機能の実装
- フロントエンドのReactとAPIの連携

### 実装概要
- アプリケーションでは、タスク管理と認証機能を中心にしたトレードアプリケーションを作成
- REST APIはEchoで構築し、DockerでPostgreSQLを使用してデータ管理
- APIにおけるルーティング、コントローラー、ユースケース、リポジトリ層の役割と依存関係を設定し、各層が疎結合で動作するように実装

![[Pasted image 20241027202934.png]]

### クリーンアーキテクチャの設計原則
- アプリケーションは、ルータ、コントローラー、ユースケース、リポジトリといった4層に分け、外側の層が内側のビジネスロジックに依存する形で設計。
- 依存関係は常に内側（ビジネスロジック層）に向かい、内側の変更が外側に影響しない設計とする
- 仕様変更やデータベースの変更があっても、影響を最小限に抑えるため、依存方向を管理

![[Pasted image 20241027203257.png]]
### デプロイ
- 最終的にREST APIはRender、ReactアプリケーションはVercelにデプロイ
## 本コースで使用するツールのインストール
下記リンクから本コースで使用するツールをインストールしてください。
### pgAdmin 4
- [https://www.pgadmin.org/download/](https://www.pgadmin.org/download/)

### Postman
- [https://www.postman.com/downloads/](https://www.postman.com/downloads/)

### Node.js (LTS 推奨版)
- [https://nodejs.org/ja](https://nodejs.org/ja)

# Todo REST API with GO/Echo
## Github repo
- [https://github.com/GomaGoma676/echo-rest-api](https://github.com/GomaGoma676/echo-rest-api)

## The Clean Architecture
依存関係逆転の原則について詳しく見ていきます。この原則の目的は、アーキテクチャ内での依存関係を「外側から内側に」向け、ビジネスロジックに影響を与えないようにすることです。

### 現状の問題点

- クリーンアーキテクチャでは、ビジネスロジックを扱う「ユースケース層」は外側の「リポジトリ層」に依存しないようにするべきです。
- しかし、通常の依存関係では、ユースケースがリポジトリに依存する状態が発生し、リポジトリのコードを変更すると、ユースケースに影響を与えてしまいます。

### 解決策：インターフェースの導入

1. **インターフェースの作成**  
    ユースケースが直接リポジトリに依存しないように、リポジトリのインターフェースを作成します。
2. **依存の反転**  
    ユースケースはリポジトリの実装にではなく、インターフェースに依存するようコードを修正します。
3. **インターフェース実装**  
    リポジトリの具体的な実装はインターフェースを介して行われ、ユースケースはインターフェースのみに依存する形になります。これにより、実装を変更しても、ユースケース側には影響が及ばなくなります。

### 結果

- インターフェースの導入によって、依存関係が「内側から外側」から「外側から内側」に逆転され、依存関係逆転の原則に沿った設計が実現されました。これにより、リポジトリの実装が変更されても、ユースケースに影響を与えることなく拡張が可能になります。
### 依存関係の設計

- **コントローラーからユースケースへの依存関係**:  
    コントローラーは内側のユースケースに依存するように設計されています。この場合、依存の向きを反転する必要はありませんが、インターフェースを導入して依存する内容を隠蔽できます。具体的には、コントローラーはユースケースのインターフェースに依存し、実際の実装内容は隠されます。
    
- **リポジトリとユースケースの関係**:  
    リポジトリとユースケース間では依存関係逆転の原則を適用し、ユースケースがリポジトリのインターフェースに依存するようにします。これにより、リポジトリの実装を変更しても、ユースケースへの影響を最小限に抑えられます。
    

### 依存性注入 (Dependency Injection)

- 各レイヤーの依存関係を外部から注入することで、各モジュールの結合度を低く抑え、テストやメンテナンスが容易になります。
- 例として、ラウターはコントローラー、コントローラーはユースケース、ユースケースはリポジトリやバリデーターに依存し、これらを外部でインスタンス化し注入します。

### レイヤーの境界とクリーンアーキテクチャの利点

- 各レイヤーの依存関係は常に「外側から内側」に向かいます。このように設計することで、外側のコード（例: フレームワークの変更）を修正しても内側（ビジネスロジック）に影響を与えないことが保証されます。
- 例えば、WebフレームワークをEchoから別のフレームワークに変える際も、インターフェース適合部分のみの変更で対応可能になります。

この設計により、変更に強く、影響範囲を最小限に抑えた柔軟なアーキテクチャが実現されます。次のレクチャーでは、Go言語を用いた具体的な実装に進みます。

