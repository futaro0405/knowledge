# Golang MySQLチュートリアル
Golangの学習を進めると、データベースとの連携は避けられません。  
このチュートリアルでは、GoでMySQLデータベースに接続し、基本的なSQL文を実行する方法を紹介します。  

MySQLは現在、開発者が利用できる最も有名で広く使用されているデータベース技術の1つです。  
巨大なコミュニティがあります。  
Wordpressのメインデータベース技術として、ウェブの半分を支えている可能性があります。  
ローカルでMySQLインスタンスを簡単に起動でき、優れたアプリケーションの構築に適しています。  

注意：技術選択は人気だけで決めるべきではありません。CockroachDBやNoSQLデータベースなどの代替案を検討する必要がある場合もあります。

MySQLドライバーとして https://github.com/go-sql-driver/mysql を使用します。  
Go-SQL-Driverは軽量で高速なMySQLドライバーで、以下の特徴があります：  

1. `TCP/IPv4`、`TCP/IPv6`、`Unixドメインソケット`、またはカスタムプロトコルでの接続をサポート
2. 切断された接続の自動処理機能

このドライバーを使用することで、GoプログラムからMySQLデータベースに効率的にアクセスできます。  

Github Repo: [go-sql-driver/mysql](https://github.com/go-sql-driver/mysql)  

# コネクションプーリング
高性能なデータベースアプリケーションを構築する場合、コネクションプーリングは絶対に必要です。  
幸いなことに、このチュートリアルで使用するオープンソースパッケージは、`database/sql`標準パッケージを使用しているため、自動的にコネクションプーリングを行います。  

これは以下を意味します：

1. データベースにクエリを実行するたびに、アプリケーション起動時に設定された接続プールから接続を使用します。
2. これらの接続は何度も再利用されます。
3. クエリを実行するたびに新しい接続を作成・破棄する必要がありません。

これにより、データベース操作のパフォーマンスが大幅に向上します。

# 実装
ローカルマシンのデータベースに接続し、基本的なinsertとselectの操作を行います。  

## MySQLデータベースへの接続
新しいmain.goファイルを作成します。  
必要なパッケージをインポートし、ローカルで実行中のデータベースへの接続を設定します。
このチュートリアルでは、`phpmyadmin`を使用してMySQLを起動し、testという名前のデータベースを作成しています。  
`sql.Open`を使用してデータベースに接続し、自動接続プールを設定します。  

```go
package main

import (
    "fmt"
    "database/sql"
    _ "github.com/go-sql-driver/mysql"
)

func main() {
    fmt.Println("Go MySQL チュートリアル")

    // データベース接続を開く
    // ローカルマシンのphpmyadminでデータベースを設定
    // データベース名は test
    db, err := sql.Open("mysql", "ユーザー名:パスワード@tcp(127.0.0.1:3306)/test")

    // 接続エラーがあれば処理
    if err != nil {
        panic(err.Error())
    }

    // main関数の実行後に接続を閉じる
    defer db.Close()
}
```

このコードで、MySQLデータベースへの基本的な接続が設定されます。