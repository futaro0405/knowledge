# ライフサイクルフック
Vueコンポーネントは生成時に一連の初期化プロセスを経ます。
このプロセスには、データの監視設定、テンプレートのコンパイル、DOMへのインスタンスのマウント、データの変更に応じたDOMの更新が含まれます。
この過程で、「ライフサイクルフック」と呼ばれる関数を使って、特定の段階で独自のコードを実行することができます。

## ライフサイクルフックの登録
例えば、`onMounted`フックは、コンポーネントが初めてレンダリングされ、DOMノードが生成された後に実行したいコードを記述するのに使用できます。

```vue
<script setup>
import { onMounted } from 'vue'

onMounted(() => {
  console.log(`コンポーネントがマウントされました。`)
})
</script>
```

ライフサイクルフックには他にもいくつかの種類があり、特に一般的に使用されるのは`onMounted`、`onUpdated`、`onUnmounted`です。

`onMounted`を呼び出すと、Vueはそのコールバック関数を現在アクティブなコンポーネントインスタンスと自動的に関連付けます。
このため、ライフサイクルフックはコンポーネントのセットアップ中に同期的に登録される必要があります。

例えば、以下のようなコードは避けるべきです。

```js
setTimeout(() => {
  onMounted(() => {
    // これは機能しません。
  })
}, 100)
```

この例の問題点は、`onMounted`が非同期的に呼び出されているため、ライフサイクルフックとして正しく動作しないことです。
ライフサイクルフックは、セットアップ関数や`<script setup>`内で同期的に配置されている必要があります。
ただし、`onMounted()`は、コールスタックが同期している限り、外部関数内で呼び出すことも可能です。

## ライフサイクルダイアグラム

以下は、インスタンスライフサイクルのダイアグラムです。今すべてを完全に理解する必要はありませんが、さらに学習して構築するにつれて、有用なリファレンスになるでしょう。
![[Pasted image 20240727222138.png]]