# **はじめに**

クラウドコンピューティングにおいて「ストレージ」（記憶領域）は欠かせない要素です。AWS（Amazon Web Services）には様々なストレージサービスが用意されており、アプリケーションやデータの種類に応じて使い分けることができます。そして、AWSのストレージサービスは**高い耐久性と可用性**（データが失われずサービス稼働し続ける能力）を備えており、バックアップや災害対策（ディザスタリカバリ）用途にも活用されています。

本記事では、AWSが提供する主要なストレージサービスについて、各サービスの特徴や違いが分かりやすいように比較しながら初心者向けに解説します。

# AWSのストレージサービスの違い

AWSには様々なストレージサービスが用意されていますが、その中から最適なストレージサービスを選択することが非常に重要です。AWSのストレージは大きく分けると「ファイルストレージ」、「オブジェクトストレージ」、「ブロックストレージ」の3つの種類に分類され、特性や適した用途が大きく異なります。まずは、事前知識としてそれぞれのストレージ方式の違いを理解しましょう。

## オブジェクトストレージ

**オブジェクトストレージ**とは、ファイルなどのデータを**オブジェクト**という単位で保存する方式のストレージです。オブジェクトはデータ本体に加えて、一意の識別子（キー）とメタデータ（作成日などの情報）を持ちます。通常のファイルシステムのようなディレクトリ構造はなく、全てのデータがフラットな構造で管理される点が特徴です。 このストレージは、インターネット経由でアクセスすることを前提としており、主にHTTP(S)プロトコルを使用してデータのアップロードやダウンロードを行います。データの保存容量に制限がなく、スケーラブルな設計になっているため、大量のデータを格納するのに適しています。一方で、オブジェクト単位での更新はできず、一度アップロードしたデータを変更したい場合は、新たにオブジェクトをアップロードして置き換える必要があります。また、他のストレージタイプに比べてアクセスのレイテンシーが高く、即時のデータ処理が求められる用途には向いていません。

オブジェクトストレージの主な用途としては、ウェブサイトの画像や動画、システムのログ、データバックアップなどが挙げられます。また、データレイクとしての活用も進んでおり、データ分析や機械学習のための大量のデータを保存する用途にも適しています。

## ファイルストレージ

**ファイルストレージ**は、従来のファイルシステムと同じように、ディレクトリ構造を持ち、ファイルを階層的に管理できるストレージです。ファイルストレージの最大の特徴は、複数のサーバーやユーザーが同時にデータを共有できる点です。このストレージは、サーバーにマウントすることで、ローカルディスクのように扱うことができます。そのため、Webサーバーのクラスター環境で複数のインスタンスから同じファイルにアクセスしたい場合や、企業内のファイル共有ストレージとして活用する場合に適しています。また、機械学習やデータ分析の分野では、複数のコンピュートノードが同じデータセットにアクセスする必要があるため、ファイルストレージが選ばれることが多いです。

ただし、ファイルストレージはオブジェクトストレージに比べてコストが高くなる傾向があります。また、スケーラビリティの点でも、オブジェクトストレージほど柔軟ではなく、利用するワークロードによってはコストパフォーマンスが悪くなることがあります。そのため、データの共有が必要ない場合や、頻繁なデータアクセスが求められない場合には、他のストレージを検討するのが賢明です。

## ブロックストレージ

**ブロックストレージ**とは、データを固定サイズのブロックに分割して管理するストレージの方式です。ブロックストレージは、データをブロック単位で管理するため、読み書きの速度が速く、低レイテンシーの特徴を持っています。そのため、データベースの保存やアプリケーションの作業用ストレージとして適しており、頻繁にデータを更新するシステムに向いています。例えば、オンラインショップや銀行システムのように、短時間で大量のトランザクションを処理する必要がある場合、ブロックストレージは非常に重要な役割を果たします。

また、ブロックストレージは通常、**1つのサーバーに直接接続**して使用されます。そのため、同じストレージを複数のサーバーで同時に利用するのには向いていません。複数のサーバーからデータを共有したい場合は、別の方法（例えばファイルストレージ）が必要になります。もう一つの特徴として、ブロックストレージは一般的に**事前に容量を決めて利用する**ことが多いです。必要に応じて容量を増やすことは可能ですが、オブジェクトストレージのように無制限に拡張できるわけではありません。そのため、どれくらいの容量が必要かを計画的に決めることが重要になります。

# **AWSの主要なストレージサービス**

３種類のストレージ方式について学びました。それぞれのストレージ方式に応じて、最適なサービスが用意されています。AWSの代表的なストレージサービスについて、その概要と主な用途を見ていきましょう。

## **S3（Simple Storage Service）**

**S3** はAWSを代表するオブジェクトストレージサービスです 。データを入れるコンテナを「バケット」と呼び、インターネット経由のAPIやコンソールからオブジェクトのアップロード・ダウンロードを行います。

S3の主な特徴は**高い耐久性と可用性**です。標準クラスで年間99.999999999%（11ナイン）の耐久性が設計されており、同一リージョン内の複数のデータセンターに自動的にコピーされます 。そのためデータ消失の可能性は極めて低く、重要なバックアップの保管にも適しています。また様々な**ストレージクラス**が用意されており、アクセス頻度や冗長性に応じてコストを最適化できます。

### S3の用途

S3は用途が非常に幅広いです。例えばウェブサイトの画像や動画、ログファイルなどの**静的コンテンツの保存・配信**先として適しています 。S3にデータを置き、CloudFront等のCDNと組み合わせることでウェブやモバイルアプリへのコンテンツ配信を高速化できます。また**バックアップ先やデータアーカイブ**としてもよく使われます。長期間保管しておきたいデータ（例：システムのバックアップ、監査記録など）をS3に保存し、必要に応じて取り出すことができます。さらにS3は他のAWSサービスと連携して**データレイク**を構築する用途にも使われます。大量の生データをS3に蓄積し、Athenaでクエリ分析したりGlueでETL処理したりすることで、大規模データ分析基盤のストレージとして機能します 。このようにS3は**あらゆる種類のデータを長期間・大容量で格納**するのに適したストレージと言えます。

## **EBS（Elastic Block Store）**

**EBS**はAWSのブロックストレージサービスです 。EC2などの仮想サーバーにディスクボリュームとして接続して使用し、OSからは「仮想ハードディスク」として認識されます。EBSボリューム上にファイルシステム（ext4やNTFSなど）を作成すれば、通常のディスクと同様にファイルの読み書きが可能です。1つのEBSボリュームは基本的に1つのEC2インスタンスにのみ接続して利用します。EBSは特定のアベイラビリティゾーン（データセンター）内で自動的に複製され、単一障害点のない設計になっています。

### **EBSの用途**

EBSはEC2の永久的なストレージ（ルートボリュームや追加のデータボリューム）として使われます 。例えばEC2上でデータベースを動かす場合、そのデータファイルをEBSに置くことで低レイテンシーなI/Oが可能となり、サーバー停止や再起動後もデータが保持されます。読み書き性能が求められるOLTPデータベースやトランザクション処理、仮想サーバーのOSディスクやアプリケーションのワーク領域に適しています 。EBSには汎用SSDやプロビジョンドIOPS（高性能SSD）、スループット重視のHDDなど**複数のボリュームタイプ**があり、ワークロードに応じて使い分けられます 。また**スナップショット（バックアップ）機能**も備えており、ボリュームの状態をポイントインタイムでキャプチャしてS3に保存することで、データ保護や他リージョンへの複製が簡単にできます 。総じてEBSは**1台のサーバーで高速なブロックデバイスが必要な場合**に最適なストレージです。

## **EFS（Elastic File System）**

**EFS**はAWSが提供するフルマネージドのファイルストレージサービスです。EFSはNFSプロトコル（NFSv4/v4.1）に対応したネットワークファイルシステムを提供しているため、Linux系のEC2インスタンスなどにネットワーク経由でマウントして使用できます。EFSの大きな特徴は**スケーラビリティと共有性**です。ファイルシステムの容量は保存されたデータ量に応じて自動で拡張・縮小し、ユーザーが容量を事前に設定・管理する必要がありません 。さらに1つのEFSを複数のEC2インスタンスから同時にアクセスすることができるため、データ分析システムなどの大規模システムでも問題なく動作します。リージョン内の複数AZにまたがってデータを冗長保存する仕組みのため耐久性・可用性も高く、あるAZのEC2から別のAZのEFSにアクセスするといったことも可能です 。

### **EFSの用途**

EFSは**複数サーバーでファイルを共有する必要があるケース**で威力を発揮します。例えばWebサーバーのクラスタでユーザーがアップロードした画像やコンテンツを共有したい場合、各サーバーから同じEFSにマウントすればファイルの一元管理ができます。またコンテンツ管理システム（CMS）のストレージとしてEFSを使うことで、どのサーバーからでも最新ファイルにアクセスできるようになります 。機械学習ワークロードで複数の計算ノードから学習データセットを参照する際の共有ストレージにも利用されています。EFS自体が高スループット・高IOPSを発揮するため、スケールするファイルサーバーが必要な**大規模データ解析**や**ログ集約**などにも適しています。ただし従量課金の料金単価はブロックストレージより高めに設定されているため、**少量データの長期保存にはS3、単一サーバー用途にはEBS**を使うなど使い分けが重要です。

## **Glacier（S3 Glacier & Glacier Deep Archive）**

**Glacier**はAWSが提供するアーカイブ向けのストレージサービスです。厳密にはS3のストレージクラスの一種ですが、アーカイブ専用ストレージとして別サービスのように扱われることもあります。Glacier最大の特徴は**極めて低コスト**であることです。頻繁なアクセスを想定せず保管に特化しているため、1GBあたりの保管料金が他のストレージより格段に安価に設定されています。その代わり**データの取出し（リストア）に時間がかかる**点に注意が必要です。Glacierに保存したデータを読み出すためには「取り出しリクエスト」を行い、数分から数時間程度待つ必要があります。いわば「倉庫」にデータをしまっておくイメージで、すぐには使わないが無くしてはいけない情報の保管に適しています。データは暗号化されつつリージョン内の複数施設に冗長化され、Glacier自体も他のS3クラス同様に99.999999999%の耐久性を持つよう設計されています。

### **Glacierの用途**

Glacierは**長期間にわたりアクセスされないデータの保管**に向いています。例えば企業や団体の**法令遵守アーカイブ**（監査ログや帳簿データを数年間保管する義務がある場合）や、研究分野における**大規模な生データのバックアップ**、医療画像や映像の**長期保存**などです。普段は使わないが削除はできないデータを低コストで保持でき、必要になったときにリストアして利用します。またS3のライフサイクル機能を使えば、一定期間経過したデータを自動でGlacierにアーカイブし、コスト最適化を図ることもできます。Glacierは基本的に一度保存したアーカイブは上書きせず追記のみの扱いになるため、**書き換えが発生しないバックアップの最終保管先**として非常に有用です。「とりあえず何でもS3標準クラスに置く」のではなく、アクセスパターンに応じてGlacierを活用することで大幅なコスト削減が可能です。

## **FSx（Amazon FSx ファイルシステム）**

**FSx**は特定のファイルシステムをAWS上でフルマネージド提供するストレージサービスです。一言でファイルシステムと言っても用途によって要件が異なるため、FSxにはいくつかの種類がありますが、代表的なのは**Windowsファイルサーバー向け**と**高性能Lustreファイルシステム向け**の2つです（他にもNetApp ONTAPやOpenZFSに対応したFSxがありますが、本記事では主要2種に絞ります）。

**FSx for Windows File Server**は、AWS上でWindowsサーバーによるファイル共有を提供するサービスです。MicrosoftのNTFSファイルシステムとSMBプロトコルに対応し、Active Directoryとの統合も可能なため、オンプレミスのWindowsファイルサーバーをクラウドに移行したい場合に適しています。社内の共有ドライブ（ネットワークフォルダ）として利用したり、Windowsアプリケーションが必要とする集中型のファイルストレージとして活用できます。従来のWindowsサーバーでのアクセス制御（アクセスコントロールリスト）やユーザークォータ管理、スナップショットによる復元機能なども備えており、エンドユーザー向けのファイルサーバー用途に最適です。

**FSx for Lustre**は、高速なI/Oが要求される**機械学習**や**HPC（ハイパフォーマンスコンピューティング）**向けに最適化された並列分散ファイルシステムを提供するサービスです。オープンソースのLustre（ラスター）ファイルシステムをフルマネージドで利用でき、サブミリ秒の低レイテンシや毎秒数百GBものスループットを実現します。大量の計算ノードから並行してデータを読み書きするワークロードでボトルネックを解消でき、例えば映像レンダリングや大規模シミュレーション、機械学習の分散学習で一時的な高速ストレージが必要な場合に使われます。FSx for LustreはS3とシームレスに連携できる点も特徴で、長期保存はS3に置きつつ処理時だけFSxにロードして高速アクセスするといった使い方が可能です。

### **FSxの用途**

FSxは上記のように**企業向けの特殊なニーズ**に応えるストレージです。Windows File Serverは社内のユーザー共有フォルダや業務アプリケーションのデータ保存先として、既存のWindows環境との親和性を保ちながらクラウド移行を実現します。一方、Lustreはオンプレミスでは構築・運用のハードルが高いHPC向けファイルシステムを手軽に利用できるようにし、データ分析や科学技術計算の分野でクラウドを活用する道を開きます。いずれも**特定用途に特化したマネージドストレージ**であり、要件に合致する場合に非常に強力な選択肢となります。

# **まとめ**

AWSには多様なストレージサービスが用意されており、それぞれ異なる特性を持っています。用途に応じて適切なストレージを選択することで、システムのパフォーマンスやコスト効率を最適化できます。

オブジェクトストレージであるS3は、その高い耐久性とスケーラビリティを活かし、静的コンテンツの保存やデータレイクの構築に適しています。一方、ブロックストレージのEBSは、EC2のディスクとして機能し、低レイテンシーなストレージが求められるデータベースやアプリケーションのワークロードに最適です。ファイルストレージであるEFSは、複数のEC2インスタンスからの同時アクセスが可能なため、分散環境でのファイル共有に欠かせません。

また、アーカイブ用途ではS3 Glacierが低コストで長期保存を実現し、Windows環境ではFSx for Windowsがオンプレミスのファイルサーバーと同様の使い勝手を提供します。機械学習や高性能計算（HPC）向けには、FSx for Lustreが高速なデータアクセスを可能にし、大規模なデータ処理を効率的に行えます。

それぞれのストレージサービスは、単独で利用するだけでなく、他のAWSサービスと組み合わせることで、さらに柔軟なデータ管理が可能になります。例えば、S3とAthenaを組み合わせたデータ分析、EBSとRDSを活用したデータベース環境の構築、EFSをLambdaと連携させたサーバーレスアプリケーションの実装など、用途に応じた活用方法が広がります。

AWSのストレージ選びは、単にデータを保存するだけでなく、**可用性、耐久性、スケーラビリティ、コストのバランスを考慮しながら選択することが重要です**。適切なストレージを活用することで、クラウド環境でのデータ管理がより効率的で柔軟なものになります。本記事がAWSストレージの理解を深め、最適な選択をする手助けとなれば幸いです。